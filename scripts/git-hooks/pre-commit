#!/bin/sh
# Pre-commit hook to format Go code with gofmt

echo "Running gofmt on staged Go files..."

# Get all staged .go files
STAGED_GO_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep '\.go$')

if [ -n "$STAGED_GO_FILES" ]; then
    # Format each file
    for FILE in $STAGED_GO_FILES; do
        gofmt -w "$FILE"
        git add "$FILE"
    done
    echo "âœ“ Go files formatted with gofmt"
else
    echo "No Go files to format"
fi

exit 0
